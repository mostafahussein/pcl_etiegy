#! /bin/bash

AUTOSTART=OFF #ON or OFF
DESKTOP_FILE_NAME=MD-@Plus.desktop

SOU_AUTOSTART_DESKTOP_DIR=/usr/share/applications
SOU_AUTOSTART_DESKTOP=$SOU_AUTOSTART_DESKTOP_DIR/$DESKTOP_FILE_NAME
BAC_AUTOSTART_DESKTOP=/etc/$DESKTOP_FILE_NAME/usr/share/applications/$DESKTOP_FILE_NAME
GNOME_AUTOSTART_DIR=/usr/share/gnome/autostart
DES_GNOME_AUTOSTART=$GNOME_AUTOSTART_DIR/$DESKTOP_FILE_NAME
KDE_AUTOSTART_DIR=/usr/share/autostart
DES_KDE_AUTOSTART=$KDE_AUTOSTART_DIR/$DESKTOP_FILE_NAME
COMMON_AUTOSTART_DIR=/etc/xdg/autostart
DES_COMMON_AUTOSTART=$COMMON_AUTOSTART_DIR/$DESKTOP_FILE_NAME

AUTOSTART=$1

if [ $AUTOSTART == 'ON' ];then

    if [ ! -f $SOU_AUTOSTART_DESKTOP ];then
        if [ -f $BAC_AUTOSTART_DESKTOP ];then
            cp $BAC_AUTOSTART_DESKTOP $SOU_AUTOSTART_DESKTOP_DIR/
	    chmod 0755 $SOU_AUTOSTART_DESKTOP
        fi
    fi

    if [ -d $GNOME_AUTOSTART_DIR -a -f $SOU_AUTOSTART_DESKTOP ];then
        cp $SOU_AUTOSTART_DESKTOP $GNOME_AUTOSTART_DIR/
        chmod 0755 $DES_GNOME_AUTOSTART
    fi
    if [ -d $KDE_AUTOSTART_DIR -a -f $SOU_AUTOSTART_DESKTOP ];then
        cp $SOU_AUTOSTART_DESKTOP $KDE_AUTOSTART_DIR/
        chmod 0755 $DES_KDE_AUTOSTART
    fi
    if [ ! -f $DES_GNOME_AUTOSTART -a ! -f $DES_KDE_AUTOSTART ];then
        if [ -d $COMMON_AUTOSTART_DIR -a -f $SOU_AUTOSTART_DESKTOP ];then
            cp $SOU_AUTOSTART_DESKTOP $COMMON_AUTOSTART_DIR/
            chmod 0755 $DES_COMMON_AUTOSTART
        fi
    fi

elif [ $AUTOSTART == 'OFF' ];then
    if [ -f $DES_GNOME_AUTOSTART ];then
        rm -f $DES_GNOME_AUTOSTART
    fi
    if [ -f $DES_KDE_AUTOSTART ];then
        rm -f $DES_KDE_AUTOSTART
    fi
    if [ -f $DES_COMMON_AUTOSTART ];then
        rm -f $DES_COMMON_AUTOSTART
    fi
fi
